# é¡¹ç›®ç›®å½•ç»“æ„è¯´æ˜

## å½“å‰ç›®å½•ç»“æ„åˆ†æ

### ğŸ”´ é—®é¢˜è¯†åˆ«
1. **æ ¹ç›®å½•æ··ä¹±**ï¼šæµ‹è¯•æ–‡ä»¶ã€ä¸»ç¨‹åºã€å·¥å…·è„šæœ¬æ··åœ¨ä¸€èµ·
2. **å‘½åä¸ä¸€è‡´**ï¼šæœ‰äº›ç”¨ä¸‹åˆ’çº¿(hedge_mode.py)ï¼Œæœ‰äº›ç”¨é©¼å³°(runbot.py)
3. **ç‰ˆæœ¬æ··æ·†**ï¼šhedge_bot_v2.py, hedge_bot_v3.py, è¿˜æœ‰æ—§çš„å®ç°
4. **åŠŸèƒ½é‡å¤**ï¼štrading_bot.pyå’Œhedge/ç›®å½•ä¸‹çš„botä¼¼ä¹åŠŸèƒ½é‡å 

## ğŸ“ å½“å‰ç»“æ„

```
lantern/
â”œâ”€â”€ ğŸ“ æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ hedge/                 # å¯¹å†²äº¤æ˜“æ ¸å¿ƒ (V3æ–°æ¶æ„)
â”‚   â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒå¼•æ“
â”‚   â”‚   â”œâ”€â”€ services/          # æœåŠ¡å±‚(æ–°)
â”‚   â”‚   â”œâ”€â”€ managers/          # ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ deprecated/        # åºŸå¼ƒä»£ç 
â”‚   â”‚   â””â”€â”€ hedge_bot_v3.py    # V3å…¥å£(æœ€æ–°)
â”‚   â”‚
â”‚   â”œâ”€â”€ exchanges/             # äº¤æ˜“æ‰€æ¥å£
â”‚   â”‚   â”œâ”€â”€ grvt.py
â”‚   â”‚   â”œâ”€â”€ apex.py
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â””â”€â”€ lighter/               # Lighteräº¤æ˜“æ‰€ç‰¹æ®Šå®ç°
â”‚
â”œâ”€â”€ ğŸ“ è¾…åŠ©åŠŸèƒ½
â”‚   â”œâ”€â”€ helpers/               # è¾…åŠ©å·¥å…·
â”‚   â”‚   â”œâ”€â”€ telegram_bot.py   # Telegramé€šçŸ¥
â”‚   â”‚   â”œâ”€â”€ lark_bot.py       # Larké€šçŸ¥
â”‚   â”‚   â””â”€â”€ logger.py         # æ—¥å¿—å·¥å…·
â”‚   â”‚
â”‚   â””â”€â”€ tests/                 # æµ‹è¯•æ–‡ä»¶
â”‚       â””â”€â”€ test_query_retry.py
â”‚
â”œâ”€â”€ ğŸ“ é…ç½®å’Œæ–‡æ¡£
â”‚   â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”‚   â”œâ”€â”€ .env                   # ç¯å¢ƒå˜é‡
â”‚   â”œâ”€â”€ .env.docker.example    # Dockerç¯å¢ƒç¤ºä¾‹
â”‚   â”œâ”€â”€ docker-compose.yml     # Dockeré…ç½®
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ requirements.txt       # ä¾èµ–
â”‚
â”œâ”€â”€ ğŸ“ æ ¹ç›®å½•ç¨‹åºï¼ˆéœ€è¦æ•´ç†ï¼‰
â”‚   â”œâ”€â”€ trading_bot.py         # æ—§çš„äº¤æ˜“æœºå™¨äººï¼Ÿ
â”‚   â”œâ”€â”€ runbot.py             # æ—§çš„è¿è¡Œè„šæœ¬ï¼Ÿ
â”‚   â”œâ”€â”€ hedge_mode.py         # å¯¹å†²æ¨¡å¼å…¥å£ï¼ˆæ—§ï¼‰
â”‚   â”œâ”€â”€ test_v3_*.py          # V3æµ‹è¯•æ–‡ä»¶
â”‚   â””â”€â”€ V3_ARCHITECTURE_SUMMARY.md
â”‚
â””â”€â”€ ğŸ“ å…¶ä»–
    â”œâ”€â”€ env/                   # Pythonè™šæ‹Ÿç¯å¢ƒ
    â””â”€â”€ logs/                  # æ—¥å¿—æ–‡ä»¶
```

## ğŸ¯ å»ºè®®çš„ç›®å½•é‡ç»„æ–¹æ¡ˆ

```
lantern/
â”œâ”€â”€ src/                       # æ‰€æœ‰æºä»£ç 
â”‚   â”œâ”€â”€ hedge/                # å¯¹å†²äº¤æ˜“æ¨¡å—
â”‚   â”œâ”€â”€ exchanges/            # äº¤æ˜“æ‰€æ¥å£
â”‚   â”œâ”€â”€ lighter/              # Lighterç‰¹æ®Šå®ç°
â”‚   â””â”€â”€ utils/                # å·¥å…·ç±»(åŸhelpers)
â”‚
â”œâ”€â”€ tests/                     # æ‰€æœ‰æµ‹è¯•
â”‚   â”œâ”€â”€ unit/                # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/          # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ fixtures/             # æµ‹è¯•æ•°æ®
â”‚
â”œâ”€â”€ scripts/                   # è¿è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ run_hedge_v3.py      # V3è¿è¡Œè„šæœ¬
â”‚   â””â”€â”€ run_legacy.py        # æ—§ç‰ˆæœ¬è¿è¡Œè„šæœ¬
â”‚
â”œâ”€â”€ config/                    # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ .env.example
â”‚   â””â”€â”€ docker/
â”‚       â”œâ”€â”€ Dockerfile
â”‚       â””â”€â”€ docker-compose.yml
â”‚
â”œâ”€â”€ docs/                      # æ–‡æ¡£
â”‚   â”œâ”€â”€ architecture/         # æ¶æ„æ–‡æ¡£
â”‚   â”œâ”€â”€ setup/               # å®‰è£…æŒ‡å—
â”‚   â””â”€â”€ api/                 # APIæ–‡æ¡£
â”‚
â”œâ”€â”€ deprecated/                # åºŸå¼ƒä»£ç 
â”‚   â”œâ”€â”€ trading_bot.py
â”‚   â”œâ”€â”€ runbot.py
â”‚   â””â”€â”€ hedge_mode.py
â”‚
â””â”€â”€ [æ ¹ç›®å½•æ–‡ä»¶]
    â”œâ”€â”€ README.md
    â”œâ”€â”€ LICENSE
    â”œâ”€â”€ requirements.txt
    â””â”€â”€ .gitignore
```

## ğŸ“‹ æ•´ç†æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå¤‡ä»½å’Œåˆ›å»ºæ–°ç»“æ„
```bash
# 1. åˆ›å»ºæ–°ç›®å½•ç»“æ„
mkdir -p src tests/unit tests/integration scripts config/docker deprecated

# 2. ç§»åŠ¨åºŸå¼ƒæ–‡ä»¶
mv trading_bot.py runbot.py hedge_mode.py deprecated/

# 3. ç§»åŠ¨æµ‹è¯•æ–‡ä»¶
mv test_v3_*.py tests/
mv tests/test_query_retry.py tests/unit/
```

### ç¬¬äºŒæ­¥ï¼šé‡ç»„æ ¸å¿ƒä»£ç 
```bash
# 1. ç§»åŠ¨æ ¸å¿ƒæ¨¡å—
mv hedge src/
mv exchanges src/
mv lighter src/
mv helpers src/utils

# 2. ç§»åŠ¨é…ç½®æ–‡ä»¶
mv Dockerfile docker-compose.yml config/docker/
mv .env.docker.example config/
```

### ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºæ–°çš„å…¥å£è„šæœ¬
```bash
# åœ¨scripts/ç›®å½•åˆ›å»ºæ¸…æ™°çš„è¿è¡Œè„šæœ¬
# run_hedge_v3.py - è¿è¡ŒV3æ¶æ„
# run_hedge_v2.py - è¿è¡ŒV2æ¶æ„(å¦‚æœéœ€è¦)
```

## ğŸš€ ä½¿ç”¨æ–°ç»“æ„çš„å¥½å¤„

1. **æ¸…æ™°çš„æ¨¡å—åˆ’åˆ†**ï¼šsrc/åŒ…å«æ‰€æœ‰æºä»£ç ï¼Œtests/åŒ…å«æ‰€æœ‰æµ‹è¯•
2. **ç‰ˆæœ¬ç®¡ç†**ï¼šdeprecated/ä¿å­˜æ—§ä»£ç ï¼Œé¿å…æ··æ·†
3. **æ˜“äºç»´æŠ¤**ï¼šæ¯ä¸ªç›®å½•èŒè´£å•ä¸€
4. **æ ‡å‡†åŒ–**ï¼šç¬¦åˆPythoné¡¹ç›®çš„æœ€ä½³å®è·µ
5. **æ˜“äºéƒ¨ç½²**ï¼šconfig/é›†ä¸­ç®¡ç†æ‰€æœ‰é…ç½®

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¿æŒå‘åå…¼å®¹**ï¼šæ•´ç†æ—¶ç¡®ä¿ç°æœ‰åŠŸèƒ½ä¸å—å½±å“
2. **æ›´æ–°å¯¼å…¥è·¯å¾„**ï¼šç§»åŠ¨æ–‡ä»¶åéœ€è¦æ›´æ–°æ‰€æœ‰importè¯­å¥
3. **æ›´æ–°æ–‡æ¡£**ï¼šç¡®ä¿READMEå’Œå…¶ä»–æ–‡æ¡£åæ˜ æ–°ç»“æ„
4. **æµ‹è¯•éªŒè¯**ï¼šæ¯æ­¥æ•´ç†åè¿è¡Œæµ‹è¯•ç¡®ä¿åŠŸèƒ½æ­£å¸¸

## ç°åœ¨éœ€è¦å†³å®š

1. æ˜¯å¦æŒ‰ç…§å»ºè®®é‡ç»„ç›®å½•ï¼Ÿ
2. æ˜¯å¦ä¿ç•™V2ç‰ˆæœ¬è¿˜æ˜¯å®Œå…¨è¿ç§»åˆ°V3ï¼Ÿ
3. trading_bot.pyå’Œrunbot.pyæ˜¯å¦è¿˜åœ¨ä½¿ç”¨ï¼Ÿ