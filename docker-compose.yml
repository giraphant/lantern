version: '3.8'

services:
  lantern:
    build: .
    container_name: lantern-hedge-bot
    restart: unless-stopped

    # Environment variables - REPLACE WITH YOUR VALUES
    environment:
      # GRVT Configuration
      - GRVT_TRADING_ACCOUNT_ID=${GRVT_TRADING_ACCOUNT_ID}
      - GRVT_PRIVATE_KEY=${GRVT_PRIVATE_KEY}
      - GRVT_API_KEY=${GRVT_API_KEY}
      - GRVT_ENVIRONMENT=prod

      # Lighter Configuration
      - LIGHTER_ACCOUNT_INDEX=${LIGHTER_ACCOUNT_INDEX}
      - LIGHTER_API_KEY_INDEX=${LIGHTER_API_KEY_INDEX}
      - LIGHTER_PRIVATE_KEY=${LIGHTER_PRIVATE_KEY}

      # Trading Parameters
      - EXCHANGE=${EXCHANGE:-grvt}
      - TICKER=${TICKER:-HYPE}
      - SIZE=${SIZE:-10}

      # Cycle Mode Parameters
      - BUILD_UP_ITERATIONS=${BUILD_UP_ITERATIONS:-30}
      - HOLD_TIME=${HOLD_TIME:-180}
      - CYCLES=${CYCLES:-999999}
      - DIRECTION=${DIRECTION:-long}

      # Safety Parameters
      - MAX_POSITION=${MAX_POSITION:-10}
      - MAX_OPEN_ORDERS=${MAX_OPEN_ORDERS:-1}
      - ORDER_TIMEOUT=${ORDER_TIMEOUT:-30}
      - MAX_RETRIES=${MAX_RETRIES:-3}

      # Advanced Parameters
      - REBALANCE_TOLERANCE=${REBALANCE_TOLERANCE:-0.15}

    # Mount logs directory to persist logs
    volumes:
      - ./logs:/app/logs
